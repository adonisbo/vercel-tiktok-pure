<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok用户信息速查</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>TikTok用户信息速查</h1>
    </header>

    <main>
        <section id="query-section">
            <h2>查询用户信息</h2>
            <form id="tiktok-query-form">
                <div>
                    <label for="tiktokUserId">TikTok用户ID:</label>
                    <input type="text" id="tiktokUserId" name="tiktokUserId" placeholder="例如: txunamydiamond" required>
                </div>
                <div>
                    <label for="jinaApiKey">Jina AI API Key:</label>
                    <input type="password" id="jinaApiKey" name="jinaApiKey" placeholder="输入您的Jina AI API Key" required>
                </div>
                <button type="submit" id="queryButton">查询</button>
            </form>
            <div id="loading-indicator" style="display: none;">正在查询，请稍候...</div>
            <div id="error-message" style="color: red; display: none;"></div>
        </section>

        <section id="results-section" style="display: none;">
            <h2>查询结果</h2>
            <div id="user-profile-id"></div>
            <p><strong>关注数:</strong> <span id="followingCount">-</span></p>
            <p><strong>粉丝量:</strong> <span id="followersCount">-</span></p>
            <p><strong>获赞量:</strong> <span id="likesCount">-</span></p>
        </section>

        <!-- 新增/恢复：历史记录存储选项 -->
        <section id="history-options-section">
            <h2>历史记录设置</h2>
            <div id="history-storage-choice">
                <label>
                    <input type="radio" name="storageOption" value="local" checked> 保存到本地浏览器
                </label>
                <label>
                    <input type="radio" name="storageOption" value="cloud"> 保存到云端 (Supabase)
                </label>
            </div>
        </section>
        <!-- 新增/恢复结束 -->

        <!-- 已有的本地历史记录区域 -->
        <section id="local-history-section">
            <h2>本地查询历史</h2>
            <ul id="local-history-list">
                <!-- 历史记录项将通过JavaScript动态添加到这里 -->
            </ul>
            <button id="clearLocalHistoryButton" style="display: none;">清空本地历史</button>
        </section>
        <!-- 本地历史区域结束 -->
        
        <!-- 新增：为云端历史预留一个显示区域 -->
        <section id="cloud-history-section" style="display: none;"> 
            <h2>云端查询历史 (Supabase)</h2>
            <button id="loadCloudHistoryButton">加载云端历史</button>
            <ul id="cloud-history-list">
                <!-- 云端历史记录项将通过JavaScript动态添加到这里 -->
            </ul>
            <!-- 可以考虑也为云端历史添加清空按钮，但逻辑会更复杂，先不加 -->
        </section>
        <!-- 云端历史区域结束 -->

    </main>

    <footer>
        <p>© TikTok用户信息速查 (专业版)</p> <!-- 保持您现有的页脚 -->
    </footer>

    <script src="script.js"></script>
</body>
</html>